{"ast":null,"code":"var _jsxFileName = \"/Users/sydney-varner/SITE/Life-Tracker/life-tracker-ui/src/components/NewActivityForm/NewActivityForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\"; // import axios from \"axios\"\n\nimport apiClient from \"../../services/apiClient\";\nimport NotAllowed from \"../NotAllowed/NotAllowed\";\nimport \"./NewActivityForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewActivityForm({\n  user,\n  addActivity\n}) {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [form, setForm] = useState({\n    caption: \"\",\n    imageUrl: \"\"\n  });\n\n  const handleOnInputChange = event => {\n    setForm(f => ({ ...f,\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  const handleOnSubmit = async () => {\n    setIsLoading(true);\n    const {\n      data,\n      error\n    } = await apiClient.createPost({\n      caption: form.caption,\n      imageUrl: form.imageUrl\n    });\n\n    if (data) {\n      addActivity(data.post);\n      setForm({\n        caption: \"\",\n        imageUrl: \"\"\n      });\n    }\n\n    if (error) {\n      setError(error);\n    }\n\n    setIsLoading(false);\n  }; // const handleOnSubmit = async (e) => {\n  //   e.preventDefault()\n  //   setIsLoading(true)\n  //   try {\n  //     const res = await axios.post(`http://localhost:3001/posts`, form)\n  //     if (res?.data?.post) {\n  //       addActivity(res.data.post)\n  //       setForm({ caption: \"\", imageUrl: \"\" })\n  //     } else {\n  //       setError(\"Something went wrong with post creation.\")\n  //     }\n  //   } catch (err) {\n  //     console.log(err)\n  //     const message = err?.response?.data?.error?.message\n  //     setError(message ?? String(err))\n  //   } finally {\n  //     setIsLoading(false)\n  //   }\n  // }\n\n\n  const renderForm = () => {\n    if (!(user === null || user === void 0 ? void 0 : user.email)) {\n      return /*#__PURE__*/_jsxDEV(NotAllowed, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"caption\",\n          children: \"Caption\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"caption\",\n          placeholder: \"A cool caption here\",\n          value: form.caption,\n          onChange: handleOnInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"imageUrl\",\n          children: \"Image URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"imageUrl\",\n          placeholder: \"The image URL for your workstation\",\n          value: form.imageUrl,\n          onChange: handleOnInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        disabled: isLoading,\n        onClick: handleOnSubmit,\n        children: isLoading ? \"Loading...\" : \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"NewPostForm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create a new post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), Boolean(error) && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 28\n      }, this), renderForm()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewActivityForm, \"1tYJnN3d4j3fDMWkjWELUjTY1ao=\");\n\n_c = NewActivityForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewActivityForm\");","map":{"version":3,"sources":["/Users/sydney-varner/SITE/Life-Tracker/life-tracker-ui/src/components/NewActivityForm/NewActivityForm.js"],"names":["useState","apiClient","NotAllowed","NewActivityForm","user","addActivity","isLoading","setIsLoading","error","setError","form","setForm","caption","imageUrl","handleOnInputChange","event","f","target","name","value","handleOnSubmit","data","createPost","post","renderForm","email","Boolean"],"mappings":"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","sourcesContent":["import { useState } from \"react\"\n// import axios from \"axios\"\nimport apiClient from \"../../services/apiClient\"\nimport NotAllowed from \"../NotAllowed/NotAllowed\"\nimport \"./NewActivityForm.css\"\n\nexport default function NewActivityForm({ user, addActivity }) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(null)\n  const [form, setForm] = useState({\n    caption: \"\",\n    imageUrl: \"\",\n  })\n\n  const handleOnInputChange = (event) => {\n    setForm((f) => ({ ...f, [event.target.name]: event.target.value }))\n  }\n\n  const handleOnSubmit = async () => {\n    setIsLoading(true)\n\n    const { data, error } = await apiClient.createPost({ caption: form.caption, imageUrl: form.imageUrl })\n    if (data) {\n      addActivity(data.post)\n      setForm({ caption: \"\", imageUrl: \"\" })\n    }\n    if (error) {\n      setError(error)\n    }\n\n    setIsLoading(false)\n  }\n\n  // const handleOnSubmit = async (e) => {\n  //   e.preventDefault()\n  //   setIsLoading(true)\n\n  //   try {\n  //     const res = await axios.post(`http://localhost:3001/posts`, form)\n  //     if (res?.data?.post) {\n  //       addActivity(res.data.post)\n  //       setForm({ caption: \"\", imageUrl: \"\" })\n  //     } else {\n  //       setError(\"Something went wrong with post creation.\")\n  //     }\n  //   } catch (err) {\n  //     console.log(err)\n  //     const message = err?.response?.data?.error?.message\n  //     setError(message ?? String(err))\n  //   } finally {\n  //     setIsLoading(false)\n  //   }\n  // }\n\n  const renderForm = () => {\n    if (!user?.email) {\n      return <NotAllowed />\n    }\n    return (\n      <div className=\"form\">\n        <div className=\"input-field\">\n          <label htmlFor=\"caption\">Caption</label>\n          <input\n            type=\"text\"\n            name=\"caption\"\n            placeholder=\"A cool caption here\"\n            value={form.caption}\n            onChange={handleOnInputChange}\n          />\n        </div>\n\n        <div className=\"input-field\">\n          <label htmlFor=\"imageUrl\">Image URL</label>\n          <input\n            type=\"text\"\n            name=\"imageUrl\"\n            placeholder=\"The image URL for your workstation\"\n            value={form.imageUrl}\n            onChange={handleOnInputChange}\n          />\n        </div>\n\n        <button className=\"btn\" disabled={isLoading} onClick={handleOnSubmit}>\n          {isLoading ? \"Loading...\" : \"Submit\"}\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"NewPostForm\">\n      <div className=\"card\">\n        <h2>Create a new post</h2>\n\n        {Boolean(error) && <span className=\"error\">{error}</span>}\n\n        {renderForm()}\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}